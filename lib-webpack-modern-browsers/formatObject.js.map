{"version":3,"sources":["../src/formatObject.js"],"names":[],"mappings":"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","file":"formatObject.js","sourcesContent":["function tryStringify(arg) {\n    try {\n        return JSON.stringify(arg);\n    } catch (_) {\n        return '[Circular]';\n    }\n}\n\nfunction internalFormatValue(value, styleFn, styles, { padding, depth, maxDepth, objects }) {\n    const typeofValue = typeof value;\n\n    if (!styles) {\n        switch (typeofValue) {\n            case value == null:\n                styles = ['cyan'];\n                break;\n            case 'boolean':\n                styles = ['green'];\n                break;\n            case 'number':\n                styles = ['yellow'];\n                break;\n            case 'string':\n                styles = ['orange'];\n                break;\n            case 'date':\n                styles = ['magenta'];\n                break;\n\n        }\n    }\n\n    let stringValue;\n    if (value === null) {\n        stringValue = 'null';\n    } else if (value === undefined) {\n        stringValue = 'undefined';\n    } else if (typeofValue === 'boolean') {\n        stringValue = value.toString();\n    } else if (value.constructor === Object) {\n        if (depth >= maxDepth) {\n            stringValue = '{object...}';\n        } else {\n            return internalFormatObject(value, styleFn, undefined, { padding, depth: depth + 1, maxDepth, objects });\n        }\n    } else if (Array.isArray(value)) {\n        if (depth >= maxDepth) {\n            stringValue = '[array...]';\n        } else {\n            return internalFormatArray(value, styleFn, { padding, depth: depth + 1, maxDepth, objects });\n        }\n    } else if (value instanceof Error) {\n        stringValue = value.stack || value.message || '';\n    } else {\n        stringValue = tryStringify(value);\n    }\n\n    const formattedValue = styleFn(styles, stringValue);\n\n    return {\n        stringValue,\n        formattedValue,\n    };\n}\n\nfunction internalFormatIterator(\n    values,\n    styleFn,\n    objectStyles,\n    { padding, depth, maxDepth, objects },\n    { prefix, suffix, prefixSuffixSpace = ' ' }\n) {\n    let breakLine = false;\n\n    values = values.map(({ key, value }, index) => {\n        let nextDepth = depth + 1;\n\n        let { stringValue, formattedValue } = internalFormatValue(\n            value,\n            styleFn,\n            key && objectStyles && objectStyles[key],\n            { padding, depth: nextDepth, maxDepth, objects },\n        );\n\n        if (stringValue && (stringValue.length > 80 || stringValue.indexOf('\\n') !== -1)) {\n            breakLine = true;\n            stringValue = stringValue.replace(/\\n/g, `\\n${padding}`);\n            formattedValue = formattedValue.replace(/\\n/g, `\\n${padding}`);\n        }\n\n        return {\n            stringValue,\n            // eslint-disable-next-line no-useless-concat\n            formattedValue: (key ? `${styleFn(['gray-light', 'bold'], `${key}:`)} ` : '')\n                            + formattedValue,\n        };\n    });\n\n\n    return {\n        stringValue: prefix + values\n            .map(\n                breakLine ? v => `\\n${padding}${v.stringValue}`\n                : fv => fv.stringValue\n            ).join(breakLine ? ',\\n' : ', ') + suffix,\n        formattedValue: `${prefix}${breakLine ? '' : prefixSuffixSpace}`\n            + `${values\n                    .map(breakLine ? v => `\\n${padding}${v.formattedValue}` : v => v.formattedValue)\n                    .join(`${styleFn(['gray'], ',')}${breakLine ? '' : ' '}`)}`\n            + `${breakLine ? `,\\n` : prefixSuffixSpace}${suffix}`,\n    };\n}\n\nfunction internalFormatObject(object, styleFn, objectStyles, { padding, depth, maxDepth, objects }) {\n    if (objects.has(object)) {\n        return { stringValue: '{Circular object}', formattedValue: '{Circular object}' };\n    }\n\n\n    const keys = Object.keys(object);\n    if (keys.length === 0) {\n        return {\n            stringValue: '{}',\n            formattedValue: '{}',\n        };\n    }\n\n    objects.add(object);\n\n    const result = internalFormatIterator(\n        keys.map(key => ({ key, value: object[key] })),\n        styleFn,\n        objectStyles,\n        { padding, depth, maxDepth, objects },\n        { prefix: '{', suffix: '}' }\n    );\n\n    objects.delete(object);\n\n    return result;\n}\n\n\nfunction internalFormatArray(array, styleFn, { padding, depth, maxDepth, objects }) {\n    if (objects.has(array)) {\n        return { stringValue: '{Circular array}', formattedValue: '{Circular array}' };\n    }\n\n    if (array.length === 0) {\n        return {\n            stringValue: '[]',\n            formattedValue: '[]',\n        };\n    }\n\n\n    objects.add(array);\n\n    const result = internalFormatIterator(\n        array.map(value => ({ key: undefined, value })),\n        styleFn,\n        undefined,\n        { padding, depth, maxDepth, objects },\n        { prefix: '[', suffix: ']', prefixSuffixSpace: '' }\n    );\n\n    objects.delete(array);\n\n    return result;\n}\n\nexport default function formatObject(object, styleFn, objectStyles, {\n    padding = '  ',\n    maxDepth = 10,\n} = {}) {\n    const { formattedValue: result } = internalFormatObject(\n        object,\n        styleFn,\n        objectStyles,\n        { padding, maxDepth, depth: 0, objects: new Set() }\n    );\n\n    if (result === '{}') {\n        return '';\n    }\n\n    return result;\n}\n"]}