{"version":3,"sources":["../src/formatObject.js"],"names":[],"mappings":"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","file":"formatObject.js","sourcesContent":["function tryStringify(arg) {\n    try {\n        return JSON.stringify(arg);\n    } catch (_) {\n        return '[Circular]';\n    }\n}\n\nfunction internalFormatValue(value, styleFn, styles, { padding, depth, maxDepth, objects }) {\n    const typeofValue = typeof value;\n\n    if (!styles) {\n        switch (typeofValue) {\n            case value == null:\n                styles = ['cyan'];\n                break;\n            case 'boolean':\n                styles = ['green'];\n                break;\n            case 'number':\n                styles = ['yellow'];\n                break;\n            case 'string':\n                styles = ['orange'];\n                break;\n            case 'date':\n                styles = ['magenta'];\n                break;\n\n        }\n    }\n\n    let stringValue;\n    if (value === null) {\n        stringValue = 'null';\n    } else if (value === undefined) {\n        stringValue = 'undefined';\n    } else if (typeofValue === 'boolean') {\n        stringValue = value.toString();\n    } else if (value.constructor === Object) {\n        if (depth >= maxDepth) {\n            stringValue = '{object...}';\n        } else {\n            return internalFormatObject(value, styleFn, undefined, { padding, depth: depth + 1, maxDepth, objects });\n        }\n    } else if (Array.isArray(value)) {\n        if (depth >= maxDepth) {\n            stringValue = '[array...]';\n        } else {\n            return internalFormatArray(value, styleFn, { padding, depth: depth + 1, maxDepth, objects });\n        }\n    } else if (value instanceof Error) {\n        stringValue = value.stack || value.message || '';\n    } else {\n        stringValue = tryStringify(value);\n    }\n\n    const formattedValue = styleFn(styles, stringValue);\n\n    return {\n        stringValue,\n        formattedValue,\n    };\n}\n\nfunction internalFormatIterator(\n    values,\n    styleFn,\n    objectStyles,\n    { padding, depth, maxDepth, objects },\n    { prefix, suffix, prefixSuffixSpace = ' ' }\n) {\n    let breakLine = false;\n\n    values = values.map(({ key, value }, index) => {\n        let nextDepth = depth + 1;\n\n        let { stringValue, formattedValue } = internalFormatValue(\n            value,\n            styleFn,\n            key && objectStyles && objectStyles[key],\n            { padding, depth: nextDepth, maxDepth, objects },\n        );\n\n        if (stringValue && (stringValue.length > 80 || stringValue.indexOf('\\n') !== -1)) {\n            breakLine = true;\n            stringValue = stringValue.replace(/\\n/g, `\\n${padding}`);\n            formattedValue = formattedValue.replace(/\\n/g, `\\n${padding}`);\n        }\n\n        return {\n            stringValue,\n            // eslint-disable-next-line no-useless-concat\n            formattedValue: (key ? `${styleFn(['gray-light', 'bold'], `${key}:`)} ` : '')\n                            + formattedValue,\n        };\n    });\n\n\n    return {\n        stringValue: prefix + values\n            .map(\n                breakLine ? v => `\\n${padding}${v.stringValue}`\n                : fv => fv.stringValue\n            ).join(breakLine ? ',\\n' : ', ') + suffix,\n        formattedValue: `${prefix}${breakLine ? '' : prefixSuffixSpace}`\n            + `${values\n                    .map(breakLine ? v => `\\n${padding}${v.formattedValue}` : v => v.formattedValue)\n                    .join(`${styleFn(['gray'], ',')}${breakLine ? '' : ' '}`)}`\n            + `${breakLine ? `,\\n` : prefixSuffixSpace}${suffix}`,\n    };\n}\n\nfunction internalFormatObject(object, styleFn, objectStyles, { padding, depth, maxDepth, objects }) {\n    if (objects.has(object)) {\n        return { stringValue: '{Circular object}', formattedValue: '{Circular object}' };\n    }\n\n\n    const keys = Object.keys(object);\n    if (keys.length === 0) {\n        return {\n            stringValue: '{}',\n            formattedValue: '{}',\n        };\n    }\n\n    objects.add(object);\n\n    const result = internalFormatIterator(\n        keys.map(key => ({ key, value: object[key] })),\n        styleFn,\n        objectStyles,\n        { padding, depth, maxDepth, objects },\n        { prefix: '{', suffix: '}' }\n    );\n\n    objects.delete(object);\n\n    return result;\n}\n\n\nfunction internalFormatArray(array, styleFn, { padding, depth, maxDepth, objects }) {\n    if (objects.has(array)) {\n        return { stringValue: '{Circular array}', formattedValue: '{Circular array}' };\n    }\n\n    if (array.length === 0) {\n        return {\n            stringValue: '[]',\n            formattedValue: '[]',\n        };\n    }\n\n\n    objects.add(array);\n\n    const result = internalFormatIterator(\n        array.map(value => ({ key: undefined, value })),\n        styleFn,\n        undefined,\n        { padding, depth, maxDepth, objects },\n        { prefix: '[', suffix: ']', prefixSuffixSpace: '' }\n    );\n\n    objects.delete(array);\n\n    return result;\n}\n\nexport default function formatObject(object, styleFn, objectStyles, {\n    padding = '  ',\n    maxDepth = 10,\n} = {}) {\n    const { formattedValue: result } = internalFormatObject(\n        object,\n        styleFn,\n        objectStyles,\n        { padding, maxDepth, depth: 0, objects: new Set() }\n    );\n\n    if (result === '{}') {\n        return '';\n    }\n\n    return result;\n}\n"]}